const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/AnalysisHistory-DgaLeXEC.js","assets/js/Logo-DoPk92ps.js","assets/js/index-DvFSEw6X.js","assets/css/index-D3nDvg0c.css","assets/css/Logo-LlBiUJ3O.css","assets/css/AnalysisHistory-DxQwlPF3.css","assets/js/TechnicalEvaluation-DhUjM_A_.js","assets/css/TechnicalEvaluation-Dsw9mNjr.css","assets/js/Analysis-DoBBIf-r.js","assets/css/Analysis-BScT7XqN.css"])))=>i.map(i=>d[i]);
import{k as O,u as w,e as b,l as x,m as M,c as g,b as p,a as s,i as C,T as y,j as f,F as E,r as Q,t as m,n as P,o as d,f as I,p as U,q as V,s as J,x as G,y as k,z as B,A as F,_ as S}from"./index-DvFSEw6X.js";import{_,l as z}from"./Logo-DoPk92ps.js";const H=O("history",()=>{const o=w(),e=b([]),l=b(null),i=b(!1),n=b(null);return{historyItems:e,currentAnalysisId:l,isLoading:i,error:n,setCurrentAnalysisId:t=>{l.value=t},fetchHistory:async()=>{try{i.value=!0;const t=await fetch("/api/history",{headers:{Authorization:`Bearer ${o.token}`}});if(!t.ok){const{message:A}=await t.json();n.value=A||"获取历史记录失败";return}const{data:r}=await t.json();e.value=r,e.value.length>0&&(l.value=e.value[0].id),n.value=null}catch(t){n.value=t.message||"请求失败，请检查网络连接",console.error("获取历史记录失败:",t)}finally{i.value=!1}},deleteItem:async t=>{try{const r=Number(t),A=await fetch("/api/history",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o.token}`},body:JSON.stringify({id:r})});if(!A.ok){const{message:h}=await A.json();n.value=h||"删除项目失败";return}e.value=e.value.filter(h=>h.id!==r),l.value===r&&(l.value=null),n.value=null}catch(r){n.value=r.message||"删除请求失败，请检查网络连接",console.error("删除操作失败:",r)}}}}),R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA+0lEQVR42u3XPQrCMBiAYbtYf65QOqlFcXLwEko9h2dxcbC9gGBBT+EdBAdtpeAdFBw+3yFTB3+wJiIJPFDokJcmtE3Fjp8c9dbIhQe/JB5qr04eYIkT8pKckKD3bPIqlpAvSVB9FOAhhWCHCDEW2EKULRaIXxBhB0EK71GAjxyCuHBvClGmb+6pGIIcvg34rwCuHbTQhmMiYIA9UoQmAsa4QHBGqDuggTluhQg9AepeExFEOaKjO2AOUVIEOpdgVliCic49EOJanFxnwBAHZJiYehF1EMCx3wIb8GGA+V8yFyvIl6zhPntcXSTIkJckwwZ9owcTe+T7yXEHdqT/B3xAAB8AAAAASUVORK5CYII=",Y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA/klEQVR42u3XsQqCQByA8aYssrEmcQqiaOo1gmrsFXqSIAgayhcIkuopeoKW1gqhraXWGv59w003WIGeEnfwA/GG+1BRr2BHLke50XPgwU+Ih9K3izexwgVRQi4I0f60eBErSEpCFOMCPJwgOGKJAAvsIcoeCwRfWOIIwQleXICPCIJAmxtDlPGPz1QAQQTfBvxvAOfL6KJmPIBzLia4YwPXWIBafIoXBAfUjARwXNEWv2Kgpo0EjPCE4IahmsosYGA6wMVcuwV9QwF6hPmHUI+Y4YEdqlm+iOr2W2AD4gJy/UvmYA1JyRbOp8vVQogzooScsUMn042J3fLlcrwBYJz+9JWY1lwAAAAASUVORK5CYII=",L="/assets/png/default-avatar-DbLJzQkT.png",D={components:{logo:z},props:{activeTab:{type:String,required:!0},isCollapsed:{type:Boolean,default:!1}},data(){return{tabs:[{id:"analysis-view",label:"分析界面"},{id:"analysis-history",label:"分析历史"},{id:"technical-evaluation",label:"技术问答"}]}},methods:{goHome(){this.$router.push("/")},handleTabClick(o){o.id==="analysis-view"&&!this.hasHistory||this.$emit("switch-tab",o.id)}},setup(){const o=w(),e=H();x(()=>{o.isLoggedIn&&!o.userInfo&&o.fetchUserInfo()});const l=M(()=>{var i;return((i=e.historyItems)==null?void 0:i.length)>0});return{authStore:o,historyStore:e,hasHistory:l}}},j={class:"logo"},K={class:"sidebar-header"},N={class:"control-buttons"},W={class:"sidebar-nav"},X=["onClick"],q={class:"username"};function $(o,e,l,i,n,a){var u;const c=f("logo");return d(),g(E,null,[p(y,{name:"button-fade"},{default:C(()=>[l.isCollapsed?(d(),g("button",{key:0,class:"expand-btn",onClick:e[0]||(e[0]=t=>o.$emit("toggle-collapse"))},e[5]||(e[5]=[s("img",{src:R,alt:"打开侧栏"},null,-1)]))):I("",!0)]),_:1}),s("nav",{class:P(["user-sidebar",{collapsed:l.isCollapsed}])},[s("h3",j,[p(c)]),s("button",{class:"collapse-btn",onClick:e[1]||(e[1]=t=>o.$emit("toggle-collapse"))},e[6]||(e[6]=[s("img",{src:Y,alt:"收起侧栏"},null,-1)])),s("div",K,[s("div",N,[s("button",{class:"nav-item",onClick:e[2]||(e[2]=()=>{})},e[7]||(e[7]=[s("span",null,"上传视频",-1)])),s("button",{class:"nav-item",onClick:e[3]||(e[3]=(...t)=>a.goHome&&a.goHome(...t))},e[8]||(e[8]=[s("span",null,"返回首页",-1)]))]),e[9]||(e[9]=s("hr",null,null,-1))]),s("ul",W,[(d(!0),g(E,null,Q(n.tabs,t=>(d(),g("li",{key:t.id,class:P(["nav-item",{active:l.activeTab===t.id,disabled:t.id==="analysis-view"&&!i.hasHistory}]),onClick:r=>a.handleTabClick(t)},[s("span",null,m(t.label),1)],10,X))),128))]),s("div",{class:"user-entry",onClick:e[4]||(e[4]=t=>o.$emit("toggle-user-panel"))},[e[10]||(e[10]=s("div",{class:"user-avatar"},[s("img",{src:L,alt:"用户"})],-1)),s("span",q,m(((u=i.authStore.userInfo)==null?void 0:u.username)??"加载中..."),1)])],2)],64)}const Z=_(D,[["render",$],["__scopeId","data-v-8e7a35d2"]]),ss={props:{show:{type:Boolean,default:!1},userInfo:{type:Object,default:()=>({name:"未命名",days:10,mobile:"未绑定",wechatBound:!1})}},emits:["close"],methods:{handleClose(){this.$emit("close")},handleBind(o){console.log(`绑定${o}`)},async handleLogout(){confirm("确定要退出登录吗？退出后将清除本机登录记录")&&(await this.$router.push("/login"),this.authStore.logout(),this.handleClose())}},setup(){return{authStore:w()}}},es={key:0,class:"user-panel-wrapper"},ts={class:"user-panel"},os={class:"user-header"},ns={class:"user-meta"},as={class:"settings-container"},is={class:"settings-group"},ls={class:"setting-item"},rs={class:"action"},ds={class:"status"},us={class:"setting-item"},cs={class:"action"},As={class:"status"},ms={class:"action-buttons"};function gs(o,e,l,i,n,a){return d(),U(V,{to:"body"},[p(y,{name:"panel-slide"},{default:C(()=>{var c,u,t,r,A,h,T;return[l.show?(d(),g("div",es,[s("div",ts,[s("div",{class:"panel-close",onClick:e[0]||(e[0]=(...v)=>a.handleClose&&a.handleClose(...v))},e[4]||(e[4]=[s("svg",{width:"14",height:"14",viewBox:"0 0 24 24"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])),s("div",os,[e[5]||(e[5]=s("div",{class:"avatar"},[s("img",{src:L,alt:"avatar"})],-1)),s("div",ns,[s("h3",null,m(((c=i.authStore.userInfo)==null?void 0:c.username)??"加载中..."),1),s("p",null,"与 Paddle PingPong 共度 "+m(((u=i.authStore.userInfo)==null?void 0:u.days)??"n")+" 天",1)])]),s("div",as,[s("section",is,[e[8]||(e[8]=s("h4",{class:"group-title"},"账号设置",-1)),s("div",ls,[e[6]||(e[6]=s("span",null,"手机号",-1)),s("div",rs,[s("span",ds,m((t=i.authStore.userInfo)!=null&&t.phone?(r=i.authStore.userInfo)==null?void 0:r.phone:"未绑定"),1),s("button",{class:"bind-btn",onClick:e[1]||(e[1]=v=>a.handleBind("mobile"))},"绑定")])]),s("div",us,[e[7]||(e[7]=s("span",null,"微信账号",-1)),s("div",cs,[s("span",As,m((A=i.authStore.userInfo)!=null&&A.weixin?(h=i.authStore.userInfo)==null?void 0:h.weixin:"未绑定"),1),s("button",{class:"bind-btn",onClick:e[2]||(e[2]=v=>a.handleBind("wechat"))},m((T=i.authStore.userInfo)!=null&&T.weixin?"解绑":"绑定"),1)])])]),e[10]||(e[10]=s("section",{class:"settings-group"},[s("h4",{class:"group-title"},"帮助与反馈"),s("div",{class:"setting-item link-item"},[s("span",null,"使用帮助"),s("span",{class:"arrow"},"›")]),s("div",{class:"setting-item link-item"},[s("span",null,"意见反馈"),s("span",{class:"arrow"},"›")])],-1)),e[11]||(e[11]=s("section",{class:"settings-group"},[s("h4",{class:"group-title"},"关于 Paddle PingPong"),s("div",{class:"setting-item link-item"},[s("span",null,"服务协议"),s("span",{class:"arrow"},"›")]),s("div",{class:"setting-item link-item"},[s("span",null,"隐私协议"),s("span",{class:"arrow"},"›")]),s("div",{class:"setting-item link-item"},[s("span",null,"开源条款"),s("span",{class:"arrow"},"›")])],-1)),e[12]||(e[12]=s("section",{class:"settings-group"},[s("h4",{class:"group-title"},"百度飞浆大模型版本"),s("div",{class:"setting-item"},[s("span",null,"当前版本"),s("span",{class:"version"},"V0.1.4")]),s("div",{class:"setting-item link-item"},[s("span",null,"模型介绍"),s("span",{class:"arrow"},"›")])],-1)),s("div",ms,[s("button",{class:"logout-btn",onClick:e[3]||(e[3]=(...v)=>a.handleLogout&&a.handleLogout(...v))},"退出登录"),e[9]||(e[9]=s("button",{class:"delete-account"},"注销账号",-1))])])])])):I("",!0)]}),_:1})])}const hs=_(ss,[["render",gs],["__scopeId","data-v-02188b7b"]]),ps=k(B(()=>S(()=>import("./AnalysisHistory-DgaLeXEC.js"),__vite__mapDeps([0,1,2,3,4,5])))),vs=k(B(()=>S(()=>import("./TechnicalEvaluation-DhUjM_A_.js"),__vite__mapDeps([6,2,3,1,4,7])))),bs=k(B(()=>S(()=>import("./Analysis-DoBBIf-r.js"),__vite__mapDeps([8,2,3,1,4,9])))),fs={components:{SidebarNav:Z,UserPanel:hs},data(){return{isMobile:!1,activeTab:"analysis-history",showUserPanel:!1,isSidebarCollapsed:!1,componentsMap:G({"analysis-history":ps,"technical-evaluation":vs,"analysis-view":bs})}},computed:{activeComponent(){return this.componentsMap[this.activeTab]},sidebarWidth(){return this.isMobile?"0":this.isSidebarCollapsed?"20px":"240px"}},mounted(){this.checkIsMobile(),window.addEventListener("resize",this.checkIsMobile)},beforeUnmount(){window.removeEventListener("resize",this.checkIsMobile)},methods:{switchTab(o){this.activeTab=o},switchToAnalysisView(){this.activeTab="analysis-view"},toggleUserPanel(){this.showUserPanel=!this.showUserPanel},handleLogout(){localStorage.removeItem("mockAuth"),localStorage.removeItem("mockUser"),this.$router.push("/login")},checkIsMobile(){this.isMobile=window.innerWidth<=768,this.isMobile&&!this.isSidebarCollapsed&&(this.isSidebarCollapsed=!0)}}},ws={class:"user-container"};function Cs(o,e,l,i,n,a){const c=f("SidebarNav"),u=f("UserPanel");return d(),g("div",ws,[p(c,{"active-tab":n.activeTab,"is-collapsed":n.isSidebarCollapsed,onSwitchTab:a.switchTab,onToggleUserPanel:a.toggleUserPanel,onToggleCollapse:e[0]||(e[0]=t=>n.isSidebarCollapsed=!n.isSidebarCollapsed)},null,8,["active-tab","is-collapsed","onSwitchTab","onToggleUserPanel"]),s("main",{class:"user-main",style:J({marginLeft:a.sidebarWidth})},[p(y,{name:"fade-slide",mode:"out-in"},{default:C(()=>[(d(),U(F(a.activeComponent),{onCheck:a.switchToAnalysisView},null,40,["onCheck"]))]),_:1}),p(u,{show:n.showUserPanel,"user-info":o.currentUser,onClose:a.toggleUserPanel,onLogout:a.handleLogout},null,8,["show","user-info","onClose","onLogout"])],4),n.isMobile&&!n.isSidebarCollapsed?(d(),g("div",{key:0,class:"sidebar-mask",onClick:e[1]||(e[1]=t=>n.isSidebarCollapsed=!0)})):I("",!0)])}const ys=_(fs,[["render",Cs],["__scopeId","data-v-cd28ed0e"]]),Bs=Object.freeze(Object.defineProperty({__proto__:null,default:ys},Symbol.toStringTag,{value:"Module"}));export{Bs as M,H as u};
